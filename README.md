# ğŸ“š æ™ºèƒ½æ–‡æ¡£å¤„ç†æµæ°´çº¿ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº LlamaIndex çš„æ™ºèƒ½æ–‡æ¡£å¤„ç†æµæ°´çº¿ï¼Œèƒ½å¤Ÿä»åŸå§‹æ–‡æ¡£è‡ªåŠ¨æå–æ¦‚å¿µã€ç”Ÿæˆè¯æ®å¹¶åˆ›å»ºé«˜è´¨é‡é—®ç­”å¯¹ã€‚

[![Python](https://img.shields.io/badge/Python-3.8+-blue.svg)](https://python.org)
[![LlamaIndex](https://img.shields.io/badge/LlamaIndex-Latest-green.svg)](https://gpt-index.readthedocs.io)
[![License](https://img.shields.io/badge/License-MIT-yellow.svg)](LICENSE)

## ğŸŒŸ æ ¸å¿ƒç‰¹æ€§

### âœ¨ **æ–°ç‰ˆæœ¬äº®ç‚¹ (v2.0)**

- ğŸ§ª **ç»Ÿä¸€å®éªŒç®¡ç†ç³»ç»Ÿ** - åŸºäºæ—¶é—´æˆ³çš„å®éªŒæ–‡ä»¶å¤¹ï¼Œå®Œæ•´è¿½è¸ªæ¯æ¬¡è¿è¡Œ
- ğŸ”„ **å®Œå…¨é‡æ„çš„æµæ°´çº¿** - 8ä¸ªæ­¥éª¤çš„æ¨¡å—åŒ–å¤„ç†ï¼Œæ•°æ®æ ¼å¼ç»Ÿä¸€
- ğŸ“Š **æ™ºèƒ½æ€§èƒ½åˆ†æ** - è¯¦ç»†çš„æ‰§è¡ŒæŠ¥å‘Šå’Œæ•°æ®æµåˆ†æ
- ğŸ¯ **é«˜è´¨é‡é—®ç­”ç”Ÿæˆ** - æ”¯æŒå¤šç§è®¤çŸ¥å±‚æ¬¡çš„é—®ç­”å¯¹åˆ›å»º
- ğŸ› ï¸ **æ”¹è¿›çš„é”™è¯¯å¤„ç†** - æ›´å¥½çš„æ•…éšœè¯Šæ–­å’Œæ¢å¤æœºåˆ¶

### ğŸ¯ **ä¸»è¦åŠŸèƒ½**

- **ğŸ“„ æ–‡æ¡£å¤„ç†**: æ”¯æŒPDFã€TXTç­‰å¤šç§æ ¼å¼
- **ğŸ” è¯­ä¹‰åˆ†å—**: æ™ºèƒ½çš„æ–‡æ¡£åˆ†å‰²å’Œæ¦‚å¿µæå–
- **ğŸ§  æ¦‚å¿µåˆ†æ**: é«˜è´¨é‡æ¦‚å¿µæå–ã€åˆå¹¶å’Œä¼˜åŒ–
- **ğŸ“‹ è¯æ®æå–**: åŸºäºæ¦‚å¿µçš„è¯æ®æ£€ç´¢å’Œè´¨é‡è¯„ä¼°
- **â“ é—®ç­”ç”Ÿæˆ**: åŸºäºBloomåˆ†ç±»æ³•çš„å¤šå±‚æ¬¡é—®ç­”å¯¹ç”Ÿæˆ
- **ğŸ“Š å®Œæ•´æŠ¥å‘Š**: è¯¦ç»†çš„å¤„ç†ç»“æœå’Œæ€§èƒ½åˆ†æ

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç¯å¢ƒè¦æ±‚

- Python 3.8+
- OpenAI API å¯†é’¥
- 8GB+ RAM (æ¨è)
- 2GB+ ç£ç›˜ç©ºé—´

### ğŸ”§ å®‰è£…é…ç½®

1. **å…‹éš†ä»“åº“**
```bash
git clone https://github.com/your-username/llamaindex-pipeline.git
cd llamaindex-pipeline
```

2. **å®‰è£…ä¾èµ–**
```bash
pip install -r requirements.txt
```

3. **é…ç½®APIå¯†é’¥**
ç¼–è¾‘ `config.yml` æ–‡ä»¶ï¼š
```yaml
openai:
  api_key: "your-api-key-here"
  model: "gpt-4o-mini"
  base_url: "https://api.openai.com/v1/"
```

4. **éªŒè¯å®‰è£…**
```bash
python step1.py --help
```

### âš¡ ä¸€é”®è¿è¡Œç¤ºä¾‹

```bash
# å¤„ç†ç¤ºä¾‹æ–‡æ¡£
python step1.py "attention is all you need.pdf"

# æŸ¥çœ‹å®éªŒç»“æœ
ls experiments/  # æŸ¥çœ‹åˆ›å»ºçš„å®éªŒæ–‡ä»¶å¤¹
```

## ğŸ“‹ å®Œæ•´æµæ°´çº¿æŒ‡å—

### ğŸ”„ **8æ­¥å¤„ç†æµç¨‹**

æˆ‘ä»¬çš„ç³»ç»Ÿé‡‡ç”¨æ¨¡å—åŒ–çš„8æ­¥å¤„ç†æµç¨‹ï¼Œæ¯ä¸€æ­¥éƒ½æœ‰æ˜ç¡®çš„è¾“å…¥è¾“å‡ºï¼š

#### **Step 1: æ–‡æ¡£åŠ è½½ä¸å‘é‡åŒ–å­˜å‚¨**
```bash
python step1.py "your_document.pdf"
```
- ğŸ“„ åŠ è½½æ–‡æ¡£ï¼Œæå–æ–‡æœ¬å†…å®¹
- âœ‚ï¸ åˆå§‹è¯­ä¹‰åˆ†å—
- ğŸ—ƒï¸ å‘é‡åŒ–å­˜å‚¨åˆ° Chroma æ•°æ®åº“
- ğŸ§ª åˆ›å»ºå®éªŒæ–‡ä»¶å¤¹: `experiments/YYYYMMDD_HHMMSS_æ–‡æ¡£å/`

**è¾“å‡º**: åˆ†å—æ•°æ®ã€å‘é‡ç´¢å¼•ã€å®éªŒæ–‡ä»¶å¤¹

#### **Step 2: æ–‡æ¡£åˆ†å—ä¸æ¦‚å¿µæå–ä¼˜åŒ–**
```bash
python step2.py experiments/20241204_143052_attention_paper/step1_vectorization.txt
```
- ğŸ”§ æ”¹è¿›çš„è¯­ä¹‰åˆ†å—ç®—æ³•
- ğŸ§  é«˜è´¨é‡æ¦‚å¿µæå–å’ŒéªŒè¯
- ğŸ“Š æ¦‚å¿µè´¨é‡è¯„åˆ†å’Œè¿‡æ»¤

**è¾“å‡º**: ä¼˜åŒ–çš„åˆ†å—ã€é«˜è´¨é‡æ¦‚å¿µåˆ—è¡¨

#### **Step 3: æ¦‚å¿µæå–ä¸æ˜ å°„åˆ†æ**
```bash
python step3.py experiments/20241204_143052_attention_paper/step2_chunking.txt
```
- ğŸ“ˆ æ·±åº¦æ¦‚å¿µåˆ†æå’Œè´¨é‡è¯„ä¼°
- ğŸ—ºï¸ æ¦‚å¿µå…³ç³»æ˜ å°„å’Œå±‚æ¬¡ç»“æ„
- ğŸ“Š æ¦‚å¿µé¢‘ç‡åˆ†æå’Œåˆ†ç±»

**è¾“å‡º**: æ¦‚å¿µåˆ†ææŠ¥å‘Šã€æ¦‚å¿µå›¾ã€è´¨é‡è¯„åˆ†

#### **Step 4: æ¦‚å¿µåˆå¹¶ä¸ä¼˜åŒ–**
```bash
python step4.py experiments/20241204_143052_attention_paper/step3_retrieval.txt
```
- ğŸ”— æ™ºèƒ½æ¦‚å¿µåˆå¹¶å’Œå»é‡
- ğŸ“‰ æ¦‚å¿µå‹ç¼©å’Œå±‚æ¬¡ä¼˜åŒ–
- ğŸ¯ æ¦‚å¿µèŠ‚ç‚¹åˆ›å»ºå’Œç½®ä¿¡åº¦è¯„åˆ†

**è¾“å‡º**: åˆå¹¶åçš„æ¦‚å¿µèŠ‚ç‚¹ã€æ¦‚å¿µæ˜ å°„å…³ç³»

#### **Step 5: æ¦‚å¿µæ£€ç´¢ä¸æ˜ å°„**
```bash
python step5.py experiments/20241204_143052_attention_paper/step4_reranking.txt
```
- ğŸ” æ¦‚å¿µåˆ°åˆ†å—çš„æ™ºèƒ½æ£€ç´¢
- ğŸ“ å¤šç»´åº¦ç›¸ä¼¼åº¦è®¡ç®— (é˜ˆå€¼: 0.2)
- ğŸ“ˆ æ£€ç´¢è´¨é‡åˆ†æå’Œè¦†ç›–åº¦è¯„ä¼°

**è¾“å‡º**: æ¦‚å¿µ-åˆ†å—æ˜ å°„å…³ç³»ã€æ£€ç´¢ç»“æœã€è´¨é‡åˆ†æ

#### **Step 6: è¯æ®æå–ä¸è´¨é‡è¯„ä¼°**
```bash
python step6.py experiments/20241204_143052_attention_paper/step5_answer_generation.txt
```
- ğŸ” åŸºäºæ¦‚å¿µçš„è¯æ®æå–
- ğŸ·ï¸ è¯æ®ç±»å‹åˆ†ç±» (å®šä¹‰ã€ä¾‹å­ã€è§£é‡Šç­‰)
- ğŸ“Š è¯æ®ç›¸å…³æ€§è¯„åˆ†å’Œè´¨é‡è¿‡æ»¤

**è¾“å‡º**: è¯æ®èŠ‚ç‚¹ã€è¯æ®åˆ†ç±»ã€è´¨é‡è¯„ä¼°æŠ¥å‘Š

#### **Step 7: é—®ç­”ç”Ÿæˆ**
```bash
python step7.py experiments/20241204_143052_attention_paper/step6_evaluation.txt
```
- â“ åŸºäºè¯æ®çš„æ™ºèƒ½é—®ç­”ç”Ÿæˆ
- ğŸ“ æ”¯æŒ Bloom åˆ†ç±»æ³•çš„6ç§è®¤çŸ¥å±‚æ¬¡
- ğŸ“Š é—®ç­”è´¨é‡è¯„ä¼°å’Œç±»å‹åˆ†å¸ƒåˆ†æ

**è¾“å‡º**: é—®ç­”å¯¹ã€è´¨é‡åˆ†æã€ç±»å‹ç»Ÿè®¡

#### **Step 8: æœ€ç»ˆæ±‡æ€»ä¸æŠ¥å‘Š**
```bash
python step8.py experiments/20241204_143052_attention_paper/step7_qa_generation.txt
```
- ğŸ“Š å®Œæ•´æµæ°´çº¿æ‰§è¡Œæ±‡æ€»
- ğŸ“ˆ æ€§èƒ½åˆ†æå’Œæ•°æ®æµç»Ÿè®¡
- ğŸ¯ æœ€ç»ˆå¤„ç†æŠ¥å‘Šå’ŒæŒ‡æ ‡

**è¾“å‡º**: æœ€ç»ˆæ±‡æ€»æŠ¥å‘Šã€æ€§èƒ½åˆ†æã€å®Œæ•´ç»Ÿè®¡

### ğŸ§ª **å®éªŒç®¡ç†ç³»ç»Ÿ**

æ¯æ¬¡è¿è¡Œéƒ½ä¼šåˆ›å»ºç‹¬ç«‹çš„å®éªŒæ–‡ä»¶å¤¹ï¼š

```
experiments/
â””â”€â”€ 20241204_143052_attention_paper/
    â”œâ”€â”€ step1_vectorization.txt     # Step1è¾“å‡º
    â”œâ”€â”€ step1_vectorization.json    # JSONæ ¼å¼æ•°æ®
    â”œâ”€â”€ step2_chunking.txt         # Step2è¾“å‡º  
    â”œâ”€â”€ step2_chunking.json
    â”œâ”€â”€ ...
    â”œâ”€â”€ step8_final_summary.txt    # æœ€ç»ˆæŠ¥å‘Š
    â””â”€â”€ experiment_metadata.json   # å®éªŒå…ƒæ•°æ®
```

### ğŸ“Š **è¾“å‡ºæ ¼å¼è¯´æ˜**

æ¯ä¸ªæ­¥éª¤éƒ½ç”Ÿæˆä¸¤ç§æ ¼å¼çš„è¾“å‡ºï¼š

- **ğŸ“„ TXTæ ¼å¼**: äººç±»å¯è¯»çš„è¯¦ç»†æŠ¥å‘Šï¼ŒåŒ…å«ç»Ÿè®¡ä¿¡æ¯å’Œç¤ºä¾‹
- **ğŸ“‹ JSONæ ¼å¼**: æœºå™¨å¯è¯»çš„å®Œæ•´æ•°æ®ï¼Œä¾¿äºåç»­å¤„ç†

## âš™ï¸ é…ç½®è¯´æ˜

### ğŸ”§ **ä¸»è¦é…ç½®é¡¹** (`config.yml`)

```yaml
# APIé…ç½®
openai:
  api_key: "your-api-key"
  model: "gpt-4o-mini"
  base_url: "https://api.openai.com/v1/"

# æ£€ç´¢é…ç½® (é‡è¦!)
retrieval:
  top_k: 5
  similarity_cutoff: 0.2  # ğŸ”§ å…³é”®é…ç½®ï¼šé™ä½é˜ˆå€¼æé«˜è¦†ç›–ç‡

# é—®ç­”ç”Ÿæˆé…ç½®
qa_generation:
  questions_per_type:
    remember: 2
    understand: 2
    apply: 1
    analyze: 1
    evaluate: 1
    create: 1

# å‘é‡æ•°æ®åº“é…ç½®
vector_store:
  type: "chroma"
  persist_directory: "./vector_db"
  enable_embedding_cache: true
```

### ğŸ“ˆ **æ€§èƒ½ä¼˜åŒ–é…ç½®**

```yaml
# é«˜çº§é…ç½®
advanced:
  max_concurrent_requests: 1
  request_timeout: 120
  max_retries: 8
  
# åˆ†å—é…ç½®  
chunking:
  max_tokens_per_chunk: 6000
  enable_token_validation: true
```

## ğŸ” æ•…éšœæ’é™¤

### âŒ **å¸¸è§é—®é¢˜**

#### **1. æ£€ç´¢è¦†ç›–ç‡ä¸º0**
```
âœ… è§£å†³æ–¹æ¡ˆ: æ£€æŸ¥ config.yml ä¸­çš„ similarity_cutoff è®¾ç½®
retrieval:
  similarity_cutoff: 0.2  # ç¡®ä¿ä¸è¦å¤ªé«˜
```

#### **2. Step7 è¯æ®æ ¼å¼é”™è¯¯**
```
é”™è¯¯: 'dict' object has no attribute 'text'
âœ… è§£å†³æ–¹æ¡ˆ: ä½¿ç”¨æ–°ç‰ˆ step7.pyï¼Œå·²ä¿®å¤æ ¼å¼å…¼å®¹æ€§
```

#### **3. å®éªŒæ–‡ä»¶å¤¹æœªæ‰¾åˆ°**
```bash
# æ£€æŸ¥å®éªŒç›®å½•
ls experiments/

# ä½¿ç”¨æ–‡ä»¶å¤¹è·¯å¾„è€Œéæ–‡ä»¶è·¯å¾„
python step2.py experiments/20241204_143052_attention_paper/
```

#### **4. API è°ƒç”¨å¤±è´¥**
```yaml
# æ£€æŸ¥ç½‘ç»œå’Œé…ç½®
advanced:
  request_timeout: 180  # å¢åŠ è¶…æ—¶æ—¶é—´
  max_retries: 5       # å¢åŠ é‡è¯•æ¬¡æ•°
```

### ğŸ› ï¸ **è°ƒè¯•æŠ€å·§**

```bash
# æŸ¥çœ‹è¯¦ç»†é”™è¯¯ä¿¡æ¯
python step1.py document.pdf 2>&1 | tee debug.log

# æ£€æŸ¥å®éªŒçŠ¶æ€
cat experiments/latest/experiment_metadata.json

# éªŒè¯é…ç½®
python -c "from config.settings import load_config_from_yaml; print(load_config_from_yaml('config.yml'))"
```

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

### ğŸ¯ **å…¸å‹å¤„ç†æ€§èƒ½**

| æ–‡æ¡£å¤§å° | å¤„ç†æ—¶é—´ | ç”Ÿæˆé—®ç­”å¯¹ | å†…å­˜ä½¿ç”¨ |
|---------|---------|-----------|---------|
| 50KB    | 2-5åˆ†é’Ÿ  | 10-20ä¸ª   | 2GB     |
| 200KB   | 5-15åˆ†é’Ÿ | 20-50ä¸ª   | 4GB     |
| 1MB+    | 15-45åˆ†é’Ÿ| 50-100ä¸ª  | 6GB+    |

### ğŸ“ˆ **è´¨é‡æŒ‡æ ‡**

- **æ¦‚å¿µæå–å‡†ç¡®ç‡**: 85%+
- **è¯æ®ç›¸å…³æ€§**: 70%+ 
- **é—®ç­”å¯¹è´¨é‡**: 80%+
- **ç³»ç»Ÿç¨³å®šæ€§**: 95%+

## ğŸ†• æ›´æ–°æ—¥å¿—

### **v2.0.0** (2024-12-06)
- ğŸ”„ **é‡å¤§é‡æ„**: å®Œå…¨é‡å†™æµæ°´çº¿ç³»ç»Ÿ
- ğŸ§ª **æ–°å¢**: ç»Ÿä¸€å®éªŒç®¡ç†ç³»ç»Ÿ
- ğŸ› **ä¿®å¤**: æ£€ç´¢è¦†ç›–ç‡é—®é¢˜ (ç›¸ä¼¼åº¦é˜ˆå€¼ 0.7â†’0.2)
- ğŸ› **ä¿®å¤**: Step7è¯æ®æ ¼å¼ä¸å…¼å®¹é—®é¢˜
- âœ¨ **æ–°å¢**: Step8å®Œæ•´æ±‡æ€»æŠ¥å‘Š
- ğŸš€ **æ”¹è¿›**: ç»Ÿä¸€æ•°æ®æ ¼å¼å’Œé”™è¯¯å¤„ç†

### **v1.x.x** (å†å²ç‰ˆæœ¬)
- åŸºç¡€æµæ°´çº¿åŠŸèƒ½
- åˆå§‹æ¦‚å¿µæå–å’Œé—®ç­”ç”Ÿæˆ

## ğŸ¤ è´¡çŒ®æŒ‡å—

### ğŸ“‹ **å¼€å‘æµç¨‹**

1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯: `git checkout -b feature/amazing-feature`
3. æäº¤æ›´æ”¹: `git commit -m 'Add amazing feature'`
4. æ¨é€åˆ†æ”¯: `git push origin feature/amazing-feature`
5. åˆ›å»º Pull Request

### ğŸ§ª **æµ‹è¯•**

```bash
# è¿è¡Œæµ‹è¯•
python -m pytest tests/

# å•æ­¥æµ‹è¯•
python step1.py test_document.pdf
```

### ğŸ“ **ä»£ç è§„èŒƒ**

- ä½¿ç”¨ç±»å‹æ³¨è§£
- éµå¾ª PEP 8 è§„èŒƒ
- æ·»åŠ è¯¦ç»†çš„docstring
- ç¡®ä¿é”™è¯¯å¤„ç†å®Œæ•´

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

- [LlamaIndex](https://gpt-index.readthedocs.io) - æ ¸å¿ƒæ¡†æ¶
- [OpenAI](https://openai.com) - API æ”¯æŒ
- [Chroma](https://www.trychroma.com) - å‘é‡æ•°æ®åº“

## ğŸ“ æ”¯æŒ

- ğŸ“§ Email: your-email@example.com
- ğŸ› Issues: [GitHub Issues](https://github.com/your-username/llamaindex-pipeline/issues)
- ğŸ“– æ–‡æ¡£: [é¡¹ç›®Wiki](https://github.com/your-username/llamaindex-pipeline/wiki)

---

â­ **å–œæ¬¢è¿™ä¸ªé¡¹ç›®ï¼Ÿè¯·ç»™æˆ‘ä»¬ä¸€ä¸ªæ˜Ÿæ ‡ï¼**

ğŸ“š **éœ€è¦å¸®åŠ©ï¼ŸæŸ¥çœ‹æˆ‘ä»¬çš„ [è¯¦ç»†æ–‡æ¡£](docs/) æˆ–æäº¤ [Issue](https://github.com/your-username/llamaindex-pipeline/issues)** 